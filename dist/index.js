parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"b6sj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.searchElement=exports.openFileFailure=exports.openFileSuccess=exports.goForward=exports.goBack=exports.selectItem=exports.getContentsFailure=exports.getContentsSuccess=exports.initFailure=exports.initSuccess=exports.init=exports.openFile=exports.getPath=exports.getChildPath=exports.getParentPath=exports.getContents=void 0;var e=require("@reduxjs/toolkit"),t=require("redux-loop"),r=i(require("fs")),n=require("child_process"),c=require("path"),o=require("istextorbinary");function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach(function(t){l(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const p=e=>e.isDirectory()?"directory":e.isSymbolicLink()?"symlink":"file",d=(e,t,n)=>"directory"===t?"":"symlink"===t?r.default.statSync(n).size:e.size,h=(e,t)=>{const r=p(e);return{type:r,size:d(e,r,t)}};function u(e,t){return function(r=e,n){return t.hasOwnProperty(n.type)?t[n.type](r,n):r}}const y=async e=>{try{const n=await r.default.promises.readdir(e).then(t=>Promise.all(t.map(t=>r.default.promises.lstat(`${e}/${t}`).then(r=>a({content:t},h(r,`${e}/${t}`))).catch(e=>({content:t,type:"file",size:0}))))).then(e=>{const{dirs:t,files:r}=e.reduce(({dirs:e,files:t},r)=>"directory"===r.type?{files:t,dirs:e.concat(r)}:{dirs:e,files:t.concat(r)},{dirs:[],files:[]});return t.sort().concat(r.sort())});return 0===n.length?{type:"directory",content:"(Empty)",size:""}:{type:"directory",content:n,size:""}}catch(t){if("EACCES"===t.code)return{type:"directory",content:"(Not Accessible)",size:""};throw t}},C=async(e,t)=>{try{const c=(0,o.isBinary)(e);if(c)return{type:"file",content:"(Binary)",size:t.size};if(null==c)return{type:"file",content:"(Not Accessible)",size:0};const i=await r.default.promises.readFile(e,{encoding:"utf8"});return 0===i.length?{type:"file",content:"(Empty)",size:0}:{type:"file",content:i,size:t.size}}catch(n){if("EACCES"===n.code)return{type:"file",content:"(Not Accessible)",size:0};throw n}},P=async({path:e,key:t})=>{const n=await r.default.promises.lstat(e).catch(e=>({isDirectory:()=>!1,size:0}));return{[t]:n.isDirectory()?await y(e):await C(e,n)}};exports.getContents=P;const S=e=>({currentPath:(0,c.resolve)(e)}),f=({path:e})=>({parentPath:(0,c.dirname)((0,c.resolve)(e))});exports.getParentPath=f;const E=({path:e,dir:t,selected:r})=>({childPath:(0,c.resolve)(e,t[r].content)});exports.getChildPath=E;const x=({path:e,dir:t,selected:r})=>{const[{currentPath:n},{childPath:c},{parentPath:o}]=[S(e),E({path:e,dir:t.content,selected:r}),f({path:e})];return{currentPath:n,parentPath:o,childPath:c}};exports.getPath=x;const A=(e,t)=>new Promise((r,c)=>{const o=(0,n.spawn)(e,[t],{stdio:"inherit",env:process.env});o.on("exit",r),o.on("error",c)}),O=async({filePath:e})=>{process.stdin.pause(),(0,o.isBinary)(e)?await A("xdg-open",e):await A("vim",e),process.stdin.resume()};exports.openFile=O;const g=(0,e.createAction)("INIT");exports.init=g;const m=(0,e.createAction)("INIT_SUCCESS");exports.initSuccess=m;const F=(0,e.createAction)("INIT_FAILURE");exports.initFailure=F;const _=(0,e.createAction)("GET_CONTENTS_SUCCESS");exports.getContentsSuccess=_;const b=(0,e.createAction)("GET_CONTENTS_FAILURE");exports.getContentsFailure=b;const I=(0,e.createAction)("SELECT_ITEM");exports.selectItem=I;const T=(0,e.createAction)("GO_BACK");exports.goBack=T;const w=(0,e.createAction)("GO_FORWARD");exports.goForward=w;const N=(0,e.createAction)("OPEN_FILE_SUCCESS");exports.openFileSuccess=N;const k=(0,e.createAction)("OPEN_FILE_FAILURE");exports.openFileFailure=k;const v=(0,e.createAction)("SEARCH_ELEMENT");exports.searchElement=v;const z=e=>t.Cmd.run(P,{successActionCreator:_,failActionCreator:b,args:e}),j={currentSelected:0,childSelected:0,parentContent:{content:[]},currentContent:{content:[]},childContent:{content:[]},history:{},settings:{colors:{selection:"#57C7FF",directory:"#57C7FF",file:"#E2E4E5",symlink:"#FF6AC1"}}},L=u(j,{INIT:(e,{payload:{path:r}})=>(0,t.loop)(a(a({},e),{},{currentPath:r}),t.Cmd.list([z([{path:r,key:"currentContent"}]),t.Cmd.action({type:"INIT_SUCCESS"})],{sequence:!0})),INIT_SUCCESS:e=>{const{currentPath:r,parentPath:n,childPath:c}=x({path:e.currentPath,dir:e.currentContent,selected:e.currentSelected});return(0,t.loop)(a(a({},e),{},{currentPath:r,parentPath:n,childPath:c}),t.Cmd.list([z([{path:n,key:"parentContent"}]),z([{path:c,key:"childContent"}])]))},GET_CONTENTS_SUCCESS:(e,{payload:t})=>{const{parentContent:r,currentContent:n,childContent:o}=t;return a(a({},e),{},r?{parentContent:r,parentSelected:r.content.findIndex(t=>t.content===(0,c.basename)(e.currentPath))}:o?{childContent:o,childSelected:e.history[e.childPath]?e.history[e.childPath].selected:0}:{currentContent:n})},SELECT_ITEM:(e,{payload:{currentSelected:r}})=>{const{childPath:n}=x({path:e.currentPath,dir:e.currentContent,selected:r});return(0,t.loop)(a(a({},e),{},{childPath:n,currentSelected:r}),z([{path:n,key:"childContent"}]))},SEARCH_ELEMENT:(e,{payload:{query:r}})=>{const n=e.currentContent.content.findIndex(e=>e.content.toLocaleLowerCase().indexOf(r)>-1);return n>-1?(0,t.loop)(e,t.Cmd.action({type:"SELECT_ITEM",payload:{currentSelected:n}})):e},GO_BACK:e=>(0,t.loop)(a(a(a({},e),{},{currentPath:e.parentPath,currentContent:e.parentContent,currentSelected:e.parentSelected,childPath:e.currentPath,childContent:e.currentContent,childSelected:e.currentSelected},f({path:e.parentPath})),{},{history:a(a({},e.history),{},{[e.parentPath]:{selected:e.parentSelected},[e.currentPath]:{selected:e.currentSelected},[e.childPath]:{selected:e.childSelected}})}),z([{path:f({path:e.parentPath}).parentPath,key:"parentContent"}])),GO_FORWARD:e=>{if("directory"===e.childContent.type){if(!Array.isArray(e.childContent.content))return e;const{childPath:r}=x({path:e.childPath,dir:e.childContent,selected:e.childSelected});return(0,t.loop)(a(a({},e),{},{currentPath:e.childPath,currentContent:e.childContent,currentSelected:e.childSelected,parentPath:e.currentPath,parentContent:e.currentContent,parentSelected:e.currentSelected,childPath:r,history:a(a({},e.history),{},{[e.parentPath]:{selected:e.parentSelected},[e.currentPath]:{selected:e.currentSelected},[e.childPath]:{selected:e.childSelected}})}),z([{path:r,key:"childContent"}]))}return(0,t.loop)(e,t.Cmd.run(O,{successActionCreator:N,failActionCreator:k,args:[{filePath:e.childPath}]}))}});var D=L;exports.default=D;
},{}],"iz0v":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("@reduxjs/toolkit"),r=require("redux-loop"),t=u(require("./reducers"));function u(e){return e&&e.__esModule?e:{default:e}}const d=(0,e.configureStore)({reducer:t.default,middleware:(0,e.getDefaultMiddleware)(),enhancers:[(0,r.install)()]});var o=d;exports.default=o;
},{"./reducers":"b6sj"}],"k4bM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l(require("react")),t=n(require("prop-types")),r=require("ink");function n(e){return e&&e.__esModule?e:{default:e}}function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function l(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if(Object.prototype.hasOwnProperty.call(e,l)){var i=n?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(r,l,i):r[l]=e[l]}return r.default=e,t&&t.set(e,r),r}const i=(e,t,r)=>{if(e.length<=t)return{items:e,selected:r};const n=t/2-t/2%1;return r+n>=e.length?{items:e.slice(-t),selected:t-e.length+r}:r-n<0?{items:e.slice(0,t),selected:r}:{items:e.slice(r-n,r+n),selected:n}},s=t=>{const{items:n,viewSize:u,onSelect:l,selectedItem:s,ItemComponent:o,marginTop:c}=t,[a,f]=(0,e.useState)({items:n,selected:s}),[d,p]=(0,e.useState)(0);return(0,e.useEffect)(()=>{const e=setTimeout(()=>f(i(n,u,s)),0);return()=>clearTimeout(e)},[n]),(0,e.useEffect)(()=>{const e=setTimeout(()=>p(0),100);return()=>clearTimeout(e)},[d]),(0,r.useInput)((e,t)=>{if("G"===e&&t.shift&&(f(i(n,u,n[n.length-1])),l(n[n.length-1])),"g"===e){const e=d+1;p(e),e>1&&(f(i(n,u,s)),l(n[0]))}("j"===e||t.downArrow)&&a.selected!==a.items.length-1&&l(a.items[a.selected+1]),("k"===e||t.upArrow)&&0!==a.selected&&l(a.items[a.selected-1])}),e.default.createElement(r.Box,{flexDirection:"column",marginTop:c},a.items.map((t,r)=>e.default.createElement(o,{key:t.value,label:t.label,value:t.value,size:t.size,type:t.type,isSelected:a.selected===r})))};s.defaultProps={selectedItem:0,marginTop:0},s.propTypes={items:t.default.oneOfType([t.default.arrayOf(t.default.oneOfType([t.default.object])),t.default.string]).isRequired,viewSize:t.default.number.isRequired,onSelect:t.default.func.isRequired,selectedItem:t.default.number,ItemComponent:t.default.func.isRequired,marginTop:t.default.number};var o=s;exports.default=o;
},{}],"paUz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Layout=exports.Pane=void 0;var e=i(require("react")),t=require("react-redux"),r=require("ink"),n=a(require("prop-types")),u=a(require("ink-text-input")),o=require("../reducers");function a(e){return e&&e.__esModule?e:{default:e}}function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var o=n?Object.getOwnPropertyDescriptor(e,u):null;o&&(o.get||o.set)?Object.defineProperty(r,u,o):r[u]=e[u]}return r.default=e,t&&t.set(e,r),r}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function f(e,t){if(null==e)return{};var r,n,u=s(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(u[r]=e[r])}return u}function s(e,t){if(null==e)return{};var r,n,u={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(u[r]=e[r]);return u}const d=e.default.forwardRef((t,n)=>{let{children:u}=t,o=f(t,["children"]);return e.default.createElement(r.Box,c({flexGrow:1,ref:n},o),u)});exports.Pane=d;const p=({action:e,updateQuery:t})=>r=>{e({query:r}),t(r)},y=({toggleStatusBar:e,updateQuery:t})=>r=>{e(!1),t("")},g=n=>{const{isActive:a,command:l,toggleStatusBar:i}=n,c=(0,t.useDispatch)(),[f,s]=(0,e.useState)("");return a&&"search"===l?e.default.createElement(u.default,{value:f,placeholder:":search",onChange:p({action:e=>c((0,o.searchElement)(e)),updateQuery:s}),onSubmit:y({toggleStatusBar:i,updateQuery:s})}):e.default.createElement(r.Text,null," ")},h=t=>{let{children:n,onMoveLeft:u,onMoveRight:o}=t,a=f(t,["children","onMoveLeft","onMoveRight"]);const{exit:l}=(0,r.useApp)(),[i,s]=(0,e.useState)(!1),[d,p]=(0,e.useState)("");return(0,r.useInput)((e,t)=>{i||("q"===e&&l(),("l"===e||t.rightArrow||t.return)&&o(),("h"===e||t.leftArrow)&&u(),"/"===e&&(s(!0),p("search")))}),e.default.createElement(r.Box,{flexDirection:"column"},e.default.createElement(r.Box,c({flexDirection:"row"},a),n),e.default.createElement(g,{isActive:i,command:d,toggleStatusBar:s}))};exports.Layout=h,d.propTypes={children:n.default.element.isRequired},g.propTypes={isActive:n.default.bool.isRequired,command:n.default.string.isRequired,toggleStatusBar:n.default.func.isRequired},h.propTypes={onMoveLeft:n.default.func.isRequired,onMoveRight:n.default.func.isRequired,children:n.default.oneOfType([n.default.arrayOf(n.default.node),n.default.node]).isRequired};
},{"../reducers":"b6sj"}],"YxD0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("react")),t=u(require("prop-types")),r=require("react-redux"),o=require("ink"),n=u(require("ink-use-stdout-dimensions")),l=u(require("./List")),a=require("./Layout"),i=require("../reducers");function u(e){return e&&e.__esModule?e:{default:e}}function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function s(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var l=o?Object.getOwnPropertyDescriptor(e,n):null;l&&(l.get||l.set)?Object.defineProperty(r,n,l):r[n]=e[n]}return r.default=e,t&&t.set(e,r),r}const d=(e,t=1)=>{if(0===e)return"0";const r=Math.max(0,t),o=Math.floor(Math.log(e)/Math.log(1024));return`${parseFloat((e/1024**o).toFixed(r))} ${["B","K","M","G","T","P","E","Z","Y"][o]}`},f=(e,t)=>"directory"===e?t.toString():"symlink"===e?`~> ${d(t)}`:d(t),p=({isFocused:e,label:t,type:r,size:o,w:n})=>{const l=f(r,o),a=e?l:"",i=e?l.length+3:3,u=n-t.length-i;return` ${t}${Array(Math.max(0,u)).fill(" ").join("")}${a} `},m=({colors:e,type:t})=>e[t],y=({content:e,type:t},r)=>"directory"===t&&Array.isArray(e)?e.map(({content:e,size:t,type:o})=>({size:t,path:r,type:o,label:e,value:`${r}/${e}`})):e,h=(e,t)=>r=>{e((0,i.selectItem)({currentSelected:t.content.findIndex(e=>e.content===r.label)}))},w=t=>{const{limit:n,w:a,isFocused:i,selector:u}=t,c=(0,r.useDispatch)(),{colors:s,selectedItem:d,content:f,path:w}=(0,r.useSelector)(e=>({colors:e.settings.colors,selectedItem:e[`${u}Selected`],content:e[`${u}Content`],path:e[`${u}Path`]})),b=y(f,w);return Array.isArray(b)?e.default.createElement(l.default,{marginTop:1,viewSize:n-1,selectedItem:d,isFocused:i,items:b,onSelect:"current"===u?h(c,f):e=>e,indicatorComponent:o.Text,ItemComponent:({label:t,size:r,type:n,isSelected:l})=>e.default.createElement(o.Text,{bold:"directory"===n,color:l?"none":m({colors:s,type:n}),backgroundColor:l?s.selection:"none",wrap:"truncate"},p({isFocused:i,label:t,size:r,w:a,type:n}))}):e.default.createElement(o.Text,{key:1},b)},b=()=>{const[t,l,u]=[(0,e.useRef)(),(0,e.useRef)(),(0,e.useRef)()],[[c,s,d],f]=(0,e.useState)([0,0,0]),[p,m]=(0,n.default)(),y=(0,r.useDispatch)();(0,e.useEffect)(()=>{f([t,l,u].map(e=>(0,o.measureElement)(e.current).width))},[p]);const h=m;return e.default.createElement(a.Layout,{height:h,onMoveLeft:()=>{y((0,i.goBack)())},onMoveRight:()=>{y((0,i.goForward)())}},e.default.createElement(a.Pane,{ref:t,key:0,width:"10%"},e.default.createElement(w,{selector:"parent",limit:h,w:c})),e.default.createElement(a.Pane,{ref:l,key:1,width:"40%"},e.default.createElement(w,{isFocused:!0,selector:"current",limit:h,w:s})),e.default.createElement(a.Pane,{ref:u,key:2,width:"50%"},e.default.createElement(w,{selector:"child",limit:h,w:d})))};w.defaultProps={w:0,isFocused:!1,limit:20},w.propTypes={w:t.default.number,limit:t.default.number,isFocused:t.default.bool,selector:t.default.string.isRequired};var g=b;exports.default=g;
},{"./List":"k4bM","./Layout":"paUz","../reducers":"b6sj"}],"Focm":[function(require,module,exports) {
"use strict";var e=l(require("react")),r=require("react-redux"),t=require("ink"),u=l(require("process")),a=l(require("./store")),i=require("./reducers"),d=l(require("./components/Main"));function l(e){return e&&e.__esModule?e:{default:e}}a.default.dispatch((0,i.init)({path:u.default.cwd()})),(0,t.render)(e.default.createElement(r.Provider,{store:a.default},e.default.createElement(d.default,null)));
},{"./store":"iz0v","./reducers":"b6sj","./components/Main":"YxD0"}]},{},["Focm"], null)
//# sourceMappingURL=/index.js.map